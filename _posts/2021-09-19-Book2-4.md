---
title: "빅데이터를 지탱하는 기술(4) - 빅데이터의 축적"
excerpt: ""

categories:
  - Book
  - Data Engineering
tags:
  - Book
  - Data Engineering 기초
toc: true
toc_label: "목차"
published: false
---

# 4. 빅데이터의 축적

## 4.1 벌크 형과 스트리밍 형의 데이터 수집

### 객체 스토리지와 데이터 수집

빅데이터는 대부분 확정성이 높은 분산 스토리지에 저장된다. 데이터베이스가 이용되는 경우도 있지만, 기본적으로 객체 스토리지에 저장한다. HDFS, Amazon S3 등이 유명하다. 

※ 스토리지와 데이터베이스의 차이

스토리지는 파일 형태가 되면 무엇이든 담을 수 있다. DB는 서버를 통해 가공된 데이터가 담긴다. 게시판에서 글은 DB에 담기고, 업로드한 파일은 스토리지에 담긴다. 스토리지에 저장된 데이터를 더욱 사용하기 쉽게 만들어주는 것이 데이터베이스라고 할 수 있다.

이러한 객체 스토리지는 작은 데이터에는 오히려 비효율적이다. 네트워크를 거쳐 실행하기 때문에 데이터양에 비해 통신 오버헤드가 너무 크기 때문이다.

#### 데이터 수집 

객체 스토리지는 대량의 작은 파일을 저장하면 성능을 저하시키는 요인이 된다. 따라서 작은 데이터는 적당히 모아서 하나의 큰 파일로 만듦으로서 효율을 높이는 데 도움이 된다.

그것과 반대로 파일이 지나치게 커도 안된다. 파일 크기가 증가하면 네트워크 전송에 시간이 걸려 예상치 못한 오류 발생률을 높인다. 이러한 데이터는 적당히 나눔으로써 문제 발생을 줄일 수 있다. 

객체 스토리지에서 효율적으로 처리할 수 있는 파일 크기는 대략 1MB에서 1GB이다. 

수집한 데이터를 가공해서 집계 효율이 좋은 분산 스토리지를 만드는 일련의 프로세스를 데이터 수집이라고 한다. 여기에는 데이터 수집부터 구조화 데이터의 작성, 분산 스토리지에 대한 장기적인 저장 등이 포함된다. 

### 벌크 형의 데이터 전송

전통적인 데이터 웨어하우스에서 사용된 것이 주로 벌크 형 방식으로 DB나 파일 서버 또는 웹 서비스 등에서 SQL, API로 정리해 데이터를 추출한다. 

데이터가 처음부터 분산 스토리지에 저장되어 있는 것이 아니라면 데이터 전송을 위한 **ETL 서버**를 설치해야 한다. 

<img src="">

#### 파일 사이즈 적정화

벌크 형 도구로 파일 사이즈를 적정화하는 것은 비교적 간단하다. 데이터를 너무 자주 전송하고 있다면 한 번의 전송에 모든 파일을 포함하도록 변경하고, 또 너무 많은 양의 데이터를 한꺼번에 전송한다면 작은 태스크로 분해해 한 번의 태스크 실행이 커지지 않도록 조정한다. 이러한 작업은 워크플로 관리 도구를 사용해 쉽게 관리할 수 있다. 

